\chapter{Fundamentação Teórica}
\label{c.fundamentacaoteorica}

Testes de Penetração, ou {\em PenTests}, são práticas realizadas para determinar fraquezas na segurança de algum sistema, este podendo ser um Sistema de Computador, uma Rede de Computadores ou uma Aplicação Web, por exemplo. Além de determinar fraquezas, pode ser usado em empresas para verificar o quão apto estão seus funcionários para terem consciência das fraquezas e como irão responder diante de um ataque.

Considera-se um ataque toda e qualquer invasão que um Sistema Computacional pode sofrer, sem aviso prévio. Este ataque geralmente é realizado por alguém com um certo conhecimento técnico na área de programação e segurança. Esta pessoa é comumente chamada de {\em Hacker}.

Um {\em Hacker} geralmente é considerado uma pessoa cujo intuito é causa problemas como, por exemplo, inserindo vírus, roubando números de cartão de crédito. Porém, segundo \citeauthoronline{hackervscracker}, o nome para pessoas que buscam se aproveitar de falhas em sistemas para ganho pessoal é dado de {\em Crackers}.

De acordo com \citeauthoronline{hackerdictionary} (\citeyear{hackerdictionary}), {\em Hacker} é definido como um programador engenhoso, um bom {\em hackeamento} é uma solução engenhosa para um problema de programação e {\em hackear} é o ato de solucionar este problema. \citeauthoronline{hackerdictionary} ainda cita cinco possíveis características que qualificam um {\em hacker}:

\begin{alineas}
  \item Uma pessoa a qual aprecia aprender detalhes de uma linguagem de programação ou de um sistema;
  \item Uma pessoa a qual aprecia programar ao invés de apenas teorizar;
  \item Uma pessoa capaz de apreciar o {\em hackeamento} de outra pessoa;
  \item Uma pessoa que aprende rapidamente uma linguagem de programação;
  \item Uma pessoa que é perito em determinada linguagem de programação ou sistema computacional.
\end{alineas}

Portanto, um {\em PenTester}, pessoa que responsável por realizar tarefas de Testes de Penetração, pode ser considerado como {\em Hacker}.

Como Testes de Penetração tentam explorar fraquezas em algum Sistema Computacional, fornecendo relatórios sobre essas possíveis fraquezas com finalidade de solucioná-las, este pode ser incorporado como uma área de Segurança de Computadores.

\section{Segurança}
\label{s.seguranca}

Desde sempre, o valor da informação foi essencial, e nos tempos atuais não é diferente. Com o aumento da tecnologia, existe uma grande preferência de manter informações virtualizadas, seja pela grande capacidade de armazenamento que os sistemas computacionais possuem, ou pelo fácil acesso que se dá devido à internet, por exemplo. Porém, manter informações centralizadas em um só lugar pode se tornar um problema, caso não mantenha a segurança de seus dispositivos atualizada.

Para proteger dados e informações tendo em mente as diversas arquiteturas de rede que existem, {\em Web Services}, aplicações, diferentes plataformas de servidores, está mais difícil do que nunca. Por os computadores e a internet de fato estar presente no nosso dia-a-dia nas últimas décadas, invasões não são mais realizadas por crianças curiosas se aventurando no mundo dos códigos.

Apesar de existirem métodos os quais previnem o roubo de dados ou invasão de sistemas, como é o caso de Anti-vírus, por exemplo, o melhor jeito de descobrir se um sistema está realmente seguro contra invasões é tentando invadir o mesmo, pois apenas assim será possível detectar problemas reais que {\em hackers} mal intesionados podem vir a causar.

Dessa forma, é possível ver Testes de Penetração como um ramo da Segurança de Computadores, tendo em vista de que eles são realizados visando melhor as atuais falhas que pode vir a se descobrir com o avanço de novos métodos.

\section{Teste de Penetração}
\label{s.pentest}

No início deste capítulo, explicamos superficialmente que Testes de Penetração, ou também chamados Testes de Invasão ou {\em PenTest}, são testes realizados de modo a simular um ataque mal intencionado à uma rede, aplicação ou sistema computacional. Os testes consistem em:

\begin{alineas}
  \item Recolher informações do alvo, antes do teste (reconhecimento);
  \item Identificar possíveis pontos de entrada;
  \item Tentativa de invasão, seja virtualmente ou pessoalmente;
  \item Reportar as descobertas.
\end{alineas}

O objetivo de se realizar Testes de Invasão é determinar fraquezas na segurança justamente para reforçar a mesma nos sistemas testados, prevenindo assim que dados e informações sejam roubadas ou manipuladas por um {\em Cracker}. {\em Crackers}, como já foi dito, são {\em Hackers} que violam o Código de Ética dos {\em Hackers}, segundo \citeauthoronline{hackerdictionary}. A linha que separa um {\em PenTester} de um {\em Cracker} é exatamente pelo fato de um {\em PenTester} ter sido contratado para realizar o ato de invadir o sistema, tendo uma permissão prévia concedida pelo dono do sistema. Outro ponto que realizar testes de penetração podem contribuir, além de aumento da segurança, é testar a Política de Observação de uma empresa perante possíveis ataques, bem como testar o quão preparada está uma empresa para responder a possíveis ataques, e também verificar o quão ciente estão os funcionários quanto a brechas que podem resultar em uma invasão.

Testes de Invasão muitas vezes são confundidos com Avaliação de Vulnerabilidade. Porém isso é um erro comum, visto que o foco o qual se dá ao realizar um Teste de Penetração é na tentativa de ganhar um acesso ao sistema, a ponto de não existirem restrições a arquivos e dados sigilosos, enquanto que Avaliação de Vulnerabilidade tem ênfase em identificar pontos vulneráveis na segurança, não focando em tentar invadí-los.

Um {\em PenTester} tem como responsabilidade tentar invadir o sistema desejado de modo que irá usar os meios e métodos que um {\em Cracker} também usaria, para garantir que o sistema está seguro. Durante o processo de invasão, o {\em PenTester} estará fazendo um relatório detalhado, passando por todos os caminhos que ele tenha tomado, para que no final esteja especificado quais são as falhas do sistema, como foram descobertas e assim arrumá-las para que não haja potencial de invasão.

\subsection{Por que realizar Testes de Penetração?}
\label{ss.whypentest}

Precisa-se ter em mente de que uma falha corrigida ontem, pode resultar em uma falha imprevista hoje. Por conta disso, é importante manter constante as realizações de testes de penetração, garantindo assim um sistema seguro. Assim, é preciso estar sempre por dentro das novidades tecnológicas pois, atualizações podem ser facas de dois gumes: do mesmo modo que trazem novas medidas para prevenir quebras de segurança, podem também proporcionar novos meios para se invadir um sistema.

\citeauthoronline{pentestbefore} cita que o motivo principal para realização de Testes de Penetração é de encontrar vulnerabilidades através de ganho de acesso e resolver estas falhas. Porém, além desse motivo principal, também é citado que é uma boa prática ter o sistema verificado por olhos que não estavam inicialmente no projeto, podendo assim encontrar falhas não verificadas anteriormente. Outros motivos que são citados, podemos listar os seguintes:

\begin{alineas}
  \item Achar brechas antes que alguém mal intencionado ache: invasores podem estar explorando fraquezas a todo momento para tentar achar uma brecha. Como o autor cita, testes de penetração podem ser vistos como um Exame Médico Anual pois, não importa o quão saúdavel pareça, sempre é bom manter em dia os diagnósticos;
  \item Reportar problemas achados ao gerente responsável: muitas vezes um problema pode ser apontado, e o teste de penetração auxilia em maneiras de resolver o problema;
  \item Verificar configurações de segurança: realizar teste de invasão contribui para garantir que o sistema esteja realmente seguro contra invasões, além de que, segundo o autor, uma opinião externa ao projeto garante que todos os pontos de vistas não possuem falhas;
  \item Treinamento de segurança para a equipe: se um teste de penetração conseguir invadir com sucesso um sistema, isso pode indicar uma falta de treinamento por parte da equipe responsável pela segurança. Testes de penetração ajudam no treinamento da equipe, preparando para conseguirem identificar um ataque e impedí-lo antes que este seja bem sucedido;
  \item Testar novas tecnologias: de acordo com o autor, a melhor maneira para se testar tecnologias novas, é quando elas ainda não foram lançadas. Testes de penetração podem ajudar a revelar falhas desconhecidas antes de um lançamento, para que o produto seja totalmente confiável.
\end{alineas}

% Portanto, dá-se importância à realização de Testes de Penetração por conta de ... ?

\subsection{Estágios de um Teste de Penetração}
\label{ss.stagespentest}

\citeauthoronline{handson} (\citeyear{handson}) descreve os estágios que um Teste de Penetração percorre, que, de acordo com ela, totalizam em 7: Escopo, Reconhecimento, Modelo de Ameaça, Análise de Vulnerabilidade, Explorar Vulnerabilidades, Pós Exploração, Relatório.

A fase de Escopo é realizada antes mesmo de se começar o Teste. Consiste em um pré-engajamento, o qual envolve definir com o cliente os objetivos que o teste irá abordar. Nesta fase, o {\em PenTester} é encarregado de explicar ao cliente sobre como os testes ocorrerão, para que não haja falta de comunicação, o que pode resultar em uma intrusão além do esperado pelo lado do cliente. Este será o momento o qual se deve sentar com o cliente o que ele espera que um Teste de Penetração resulte, toda informação será crítica. Certas dúvidas terão que ser apresentadas, como o se terá que definir a maioria dos requisitos, quais portas de IP testar, quais ações serão permitidas pelo cliente, o trabalho será superficial, apenas verificando vulnerabilidades e brechas, ou poderá tentar derrubar o sistema, qual o horário que serão realizados os testes, entre outras perguntas técnicas. Por fim, é nesta fase que deverá ser providenciado um acordo, deixando claro que todas as informações obtidas serão mantidas confidencialmente, como também concedendo autorização para realizar os testes pois, caso contrário, poderá ser considerado um crime.

Após a fase de Escopo, ou Pré-engajamento, temos a fase de Reconhecimento. Nesta fase, será a

% \subsection{Teste de Penetração como Área Forense}
% \label{s.pentestforense}
%
% \section{Computação na Nuvem}
% \label{s.cloudcomputing}
%
% \subsection{Serviços na Nuvem}
% \label{s.cloudservices}
%
% \subsection{Testes de Penetração em Sistemas na Nuvem}
% \label{s.pentestincloud}
